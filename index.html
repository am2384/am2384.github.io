<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>ECE 3400 - Group 18</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/agency.min.css" rel="stylesheet">
    <link href="stylesheets/code_blocks.css" rel="stylesheet">

  </head>

  <body id="page-top">

      <!-- Navigation -->
      <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
          <div class="container">
              <a class="navbar-brand js-scroll-trigger" href="#page-top">YAAAS</a>
              <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                  Menu
                  <i class="fa fa-bars"></i>
              </button>
              <div class="collapse navbar-collapse" id="navbarResponsive">
                  <ul class="navbar-nav text-uppercase ml-auto">
                      <li class="nav-item">
                          <a class="nav-link js-scroll-trigger" href="#services">Quick Links</a>
                      </li>
                      <li class="nav-item">
                          <a class="nav-link js-scroll-trigger" href="#portfolio">Portfolio</a>
                      </li>
                      <li class="nav-item">
                          <a class="nav-link js-scroll-trigger" href="#about">About</a>
                      </li>
                      <li class="nav-item">
                          <a class="nav-link js-scroll-trigger" href="#team">Team</a>
                      </li>
                  </ul>
              </div>
          </div>
      </nav>

      <!-- Header -->
      <header class="masthead">
          <div class="container">
              <div class="intro-text">
                  <div class="intro-lead-in">yaaas queen, slay!</div>
                  <div class="intro-heading text-uppercase">Welcome To The YAAAS Studio!</div>
                  <a class="btn btn-primary btn-xl text-uppercase js-scroll-trigger" href="#services">Tell Me More, Tell Me More</a>
              </div>
          </div>
      </header>

      <!-- Services -->
      <section id="services">
          <div class="container">
              <div class="row">
                  <div class="col-lg-12 text-center">
                      <h2 class="section-heading text-uppercase">Quick Links</h2>
                      <h3 class="section-subheading text-muted">whoop di scoop.</h3>
                  </div>
              </div>
              <div class="row text-center">
                  <div class="col-md-4">
                      <span class="fa-stack fa-4x">
                          <i class="fa fa-circle fa-stack-2x text-primary"></i>
                          <i class="fa fa-shopping-cart fa-stack-1x fa-inverse"></i>
                      </span>
                      <h4 class="service-heading">GitHub Repository</h4>
                      <p class="text-muted">Click <a href="https://github.com/am2384/am2384.github.io">here</a> to go to GitHub.</p>
                  </div>
                  <div class="col-md-4">
                      <span class="fa-stack fa-4x">
                          <i class="fa fa-circle fa-stack-2x text-primary"></i>
                          <i class="fa fa-laptop fa-stack-1x fa-inverse"></i>
                      </span>
                      <h4 class="service-heading">ECE 3400 Website</h4>
                      <p class="text-muted">Our robot is obviously the best, but here are some <a href="https://cei-lab.github.io/ece3400-2018/">less awesome</a> ones.</p>
                  </div>
                  <div class="col-md-4">
                      <span class="fa-stack fa-4x">
                          <i class="fa fa-circle fa-stack-2x text-primary"></i>
                          <i class="fa fa-lock fa-stack-1x fa-inverse"></i>
                      </span>
                      <h4 class="service-heading">Competition Video</h4>
                      <p class="text-muted">We came in <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">first!</a></p>
                  </div>
              </div>
          </div>
      </section>

      <!-- Portfolio Grid -->
      <section class="bg-light" id="portfolio">
          <div class="container">
              <div class="row">
                  <div class="col-lg-12 text-center">
                      <h2 class="section-heading text-uppercase">Portfolio</h2>
                      <h3 class="section-subheading text-muted">takin' care of business (every day)</h3>
                  </div>
              </div>
              <div class="row">
                  <div class="col-md-4 col-sm-6 portfolio-item">
                      <a class="portfolio-link" data-toggle="modal" href="#portfolioModal1">
                          <div class="portfolio-hover">
                              <div class="portfolio-hover-content">
                                  <i class="fa fa-plus fa-3x"></i>
                              </div>
                          </div>
                          <img class="img-fluid" src="img/portfolio/Contract.jpg" alt="">
                      </a>
                      <div class="portfolio-caption">
                          <h4>Team Contract</h4>
                          <p class="text-muted">Rules help control the fun!</p>
                      </div>
                  </div>
                  <div class="col-md-4 col-sm-6 portfolio-item">
                      <a class="portfolio-link" data-toggle="modal" href="#portfolioModal2">
                          <div class="portfolio-hover">
                              <div class="portfolio-hover-content">
                                  <i class="fa fa-plus fa-3x"></i>
                              </div>
                          </div>
                          <img class="img-fluid" src="img/portfolio/lab1.jpg" alt="">
                      </a>
                      <div class="portfolio-caption">
                          <h4>Lab 1</h4>
                          <p class="text-muted">Microcontrollers</p>
                      </div>
                  </div>
                  <div class="col-md-4 col-sm-6 portfolio-item">
                      <a class="portfolio-link" data-toggle="modal" href="#portfolioModal3">
                          <div class="portfolio-hover">
                              <div class="portfolio-hover-content">
                                  <i class="fa fa-plus fa-3x"></i>
                              </div>
                          </div>
                          <img class="img-fluid" src="img/portfolio/roverFrontML1.JPG" alt="">
                      </a>
                      <div class="portfolio-caption">
                          <h4>Milestone 1</h4>
                          <p class="text-muted">Sensor Integration</p>
                      </div>
                  </div>
                  <div class="col-md-4 col-sm-6 portfolio-item">
                      <a class="portfolio-link" data-toggle="modal" href="#portfolioModal4">
                          <div class="portfolio-hover">
                              <div class="portfolio-hover-content">
                                  <i class="fa fa-plus fa-3x"></i>
                              </div>
                          </div>
                          <img class="img-fluid" src="img/portfolio/lab2.JPG" alt="">
                      </a>
                      <div class="portfolio-caption">
                          <h4>Lab 2</h4>
                          <p class="text-muted">Analog Circuitry & FFT</p>
                      </div>
                  </div>
                  <div class="col-md-4 col-sm-6 portfolio-item">
                      <a class="portfolio-link" data-toggle="modal" href="#portfolioModal5">
                          <div class="portfolio-hover">
                              <div class="portfolio-hover-content">
                                  <i class="fa fa-plus fa-3x"></i>
                              </div>
                          </div>
                          <img class="img-fluid" src="img/portfolio/milestone2.jpg" alt="">
                      </a>
                      <div class="portfolio-caption">
                          <h4>Milestone 2</h4>
                          <p class="text-muted">Wall Following & IR Detection</p>
                      </div>
                  </div>
                  <div class="col-md-4 col-sm-6 portfolio-item">
                      <a class="portfolio-link" data-toggle="modal" href="#portfolioModal6">
                          <div class="portfolio-hover">
                              <div class="portfolio-hover-content">
                                  <i class="fa fa-plus fa-3x"></i>
                              </div>
                          </div>
                          <img class="img-fluid" src="img/portfolio/lab3thumbnail.jpg" alt="">
                      </a>
                      <div class="portfolio-caption">
                          <h4>Lab 3</h4>
                          <p class="text-muted">Wireless Communication</p>
                      </div>
                  </div>
                  <div class="col-md-4 col-sm-6 portfolio-item">
                      <a class="portfolio-link" data-toggle="modal" href="#portfolioModal7">
                          <div class="portfolio-hover">
                              <div class="portfolio-hover-content">
                                  <i class="fa fa-plus fa-3x"></i>
                              </div>
                          </div>
                          <img class="img-fluid" src="img/portfolio/06-thumbnail.jpg" alt="">
                      </a>
                      <div class="portfolio-caption">
                          <h4>Milestone 3</h4>
                          <p class="text-muted">Almost it</p>
                      </div>
                  </div>
                  <div class="col-md-4 col-sm-6 portfolio-item">
                      <a class="portfolio-link" data-toggle="modal" href="#portfolioModal8">
                          <div class="portfolio-hover">
                              <div class="portfolio-hover-content">
                                  <i class="fa fa-plus fa-3x"></i>
                              </div>
                          </div>
                          <img class="img-fluid" src="img/portfolio/lab1.jpg" alt="">
                      </a>
                      <div class="portfolio-caption">
                          <h4>Lab 4</h4>
                          <p class="text-muted">Phew!</p>
                      </div>
                  </div>
                  <div class="col-md-4 col-sm-6 portfolio-item">
                      <a class="portfolio-link" data-toggle="modal" href="#portfolioModal9">
                          <div class="portfolio-hover">
                              <div class="portfolio-hover-content">
                                  <i class="fa fa-plus fa-3x"></i>
                              </div>
                          </div>
                          <img class="img-fluid" src="img/portfolio/lab1.jpg" alt="">
                      </a>
                      <div class="portfolio-caption">
                          <h4>Milestone 4</h4>
                          <p class="text-muted">Never again</p>
                      </div>
                  </div>
              </div>
          </div>
      </section>

      <!-- About -->
      <section id="about">
          <div class="container">
              <div class="row">
                  <div class="col-lg-12 text-center">
                      <h2 class="section-heading text-uppercase">Timeline</h2>
                      <h3 class="section-subheading text-muted">See how team YAAAS developed our project over time</h3>
                  </div>
              </div>
              <div class="row">
                  <div class="col-lg-12">
                      <ul class="timeline">
                          <li>
                              <div class="timeline-image">
                                  <img class="rounded-circle img-fluid" src="img/about/1.jpg" alt="">
                              </div>
                              <div class="timeline-panel">
                                  <div class="timeline-heading">
                                      <h4>August</h4>
                                      <h4 class="subheading">Our Humble Beginnings</h4>
                                  </div>
                                  <div class="timeline-body">
                                      <p class="text-muted">YAAAS emerged from the bowels of Duffield Hall</p>
                                  </div>
                              </div>
                          </li>
                          <li class="timeline-inverted">
                              <div class="timeline-image">
                                  <img class="rounded-circle img-fluid" src="img/about/2.jpg" alt="">
                              </div>
                              <div class="timeline-panel">
                                  <div class="timeline-heading">
                                      <h4>September</h4>
                                      <h4 class="subheading">An Robot is Born</h4>
                                  </div>
                                  <div class="timeline-body">
                                      <p class="text-muted">At 6.66 lbs, we are proud parents</p>
                                  </div>
                              </div>
                          </li>
                          <li>
                              <div class="timeline-image">
                                  <img class="rounded-circle img-fluid" src="img/about/3.jpg" alt="">
                              </div>
                              <div class="timeline-panel">
                                  <div class="timeline-heading">
                                      <h4>October</h4>
                                      <h4 class="subheading">Transition to Full Service</h4>
                                  </div>
                                  <div class="timeline-body">
                                      <p class="text-muted">Baby robot hits puberty, his body begins to change</p>
                                  </div>
                              </div>
                          </li>
                          <li class="timeline-inverted">
                              <div class="timeline-image">
                                  <img class="rounded-circle img-fluid" src="img/about/4.jpg" alt="">
                              </div>
                              <div class="timeline-panel">
                                  <div class="timeline-heading">
                                      <h4>July 2014</h4>
                                      <h4 class="subheading">Phase Two Expansion</h4>
                                  </div>
                                  <div class="timeline-body">
                                      <p class="text-muted">He goes rogue and tries to take over the Earth (and venus. we're unsure why)</p>
                                  </div>
                              </div>
                          </li>
                          <li class="timeline-inverted">
                              <div class="timeline-image">
                                  <h4>
                                      Wow
                                      <br>We
                                      <br>Won
                                  </h4>
                              </div>
                          </li>
                      </ul>
                  </div>
              </div>
          </div>
      </section>

      <!-- Team -->
      <section class="bg-light" id="team">
          <div class="container">
              <div class="row">
                  <div class="col-lg-12 text-center">
                      <h2 class="section-heading text-uppercase">Team YAAAS</h2>
                      <h3 class="section-subheading text-muted">Catch us in Phillips Hall 24/7/365</h3>
                  </div>
              </div>
              <div class="row">
                  <div class="col-sm-4">
                      <div class="team-member">
                          <img class="mx-auto rounded-circle" src="img/team/PP.jpg" alt="">
                          <h4>Adeel Mahmood</h4>
                          <p class="text-muted">Implementer</p>
                      </div>
                  </div>
                  <div class="col-sm-4">
                      <div class="team-member">
                          <img class="mx-auto rounded-circle" src="img/team/alexLi.jpeg" alt="">
                          <h4>Alex Li</h4>
                          <p class="text-muted">Cheerleader</p>
                      </div>
                  </div>
                  <div class="col-sm-4">
                      <div class="team-member">
                          <img class="mx-auto rounded-circle" src="img/team/sheila.jpg" alt="">
                          <h4>Sheila Balu</h4>
                          <p class="text-muted">Head of Fun Committee</p>
                      </div>
                  </div>
              </div>
              <div class="row">
                  <div class="col-sm-6">
                      <div class="team-member">
                          <img class="mx-auto rounded-circle" src="img/team/Yixiao_profile.jpg" alt="">
                          <h4>Yixiao Zhang</h4>
                          <p class="text-muted">Russian Hacker</p>
                      </div>
                  </div>
                  <div class="col-sm-6">
                      <div class="team-member">
                          <img class="mx-auto rounded-circle" src="img/team/alvin.jpg" alt="">
                          <h4>Alvin Pan</h4>
                          <p class="text-muted">Strictly Business</p>
                      </div>
                  </div>
              </div>
          </div>
      </section>

      <!-- Footer -->
      <footer>
          <div class="container">
              <div class="row">
                  <div class="col-md-4">
                      <span class="copyright">Copyright &copy; yaaas inc 2018</span>
                  </div>
                  <div class="col-md-4">
                  </div>
                  <div class="col-md-4">
                      <p> We the best </p>
                  </div>
              </div>
          </div>
      </footer>

      <!-- Portfolio Modals -->
      <!-- Modal 1 -->
      <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="close-modal" data-dismiss="modal">
                      <div class="lr">
                          <div class="rl"></div>
                      </div>
                  </div>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 mx-auto">
                              <div class="modal-body">
                                  <!-- Project Details Go Here -->
                                  <h2 class="text-uppercase">Team Contract</h2>
                                  <p class="item-intro text-muted">rules help keep us cool as a cucumber</p>
                                  <p>ECE 3400, Fall 2018, Team 18</p>
                                  <p>Team Members: Alexander Li, Sheila Balu, Adeel Mahmood, Yixiao Zhang, Alvin Pan</p>
                                  <p>Team Name: YAAAS</p>
                                  <h4 class="service-heading">Team Procedures</h4>
                                  <p>We will have weekly Fridays in Upson 142 at 11:15am. We will communicate using Facebook Messenger. Our decision making policy will come to a vote, and ties will be broken by rock-paper-scissors. Whoever is the assigned lead for that time period (see below) will set the meeting agenda and keep the meeting on track. The team lead will also take notes and meeting minutes.</p>
                                  <h4 class="service-heading">Team Expectations</h4>
                                  <p>Work quality: Our team expects to have a beautiful website. We expect our rover to win. We expect everyone to contribute equally. Communication will be key to achieving high standard of work. During times when someone is too busy, they should communicate that.</p>
                                  <p>Team participation: We will ask team members what they want to work on, and allow people to work on things they are most interested in. We will uphold open communication, allowing everyone to share ideas. We will stay on task by following the class calendar and meeting milestones.  We prefer informal leadership, with the assigned team lead taking initiative </p>
                                  <p>Personal accountability: We expect everyone to be at every meeting on time, unless communicating to the team 24 hours before. We expect everyone to meet every deadline, and finish tasks at least 3 hours before deadlines. We expect everyone to communicate actively. We expect everyone to take part in team decisions. </p>
                                  <p>Consequences: If someone is consistently late, the team will talk to the individual. If the behavior continues, the team will talk to the professor.</p>
                                  <h4 class="service-heading">Team Leadership</h4>
                                  <p>Starting the week of 9/3, we will cycle the assigned team lead every week. The cycle will go: Adeel, Alex, Sheila, Yixiao, Alvin. </p>
                                  <h4 class="service-heading">Signatures</h4>
                                  <p>a)	I participated in formulating the standards, roles, and procedures as stated in this contract. b)	I understand that I am obligated to abide by these terms and conditions. c)	I understand that if I do not abide by these terms and conditions, I will suffer the consequences as stated in this contract.</p>

                                  <p>Alexander Li 8/31/18</p>
                                  <p>Adeel Mahmood 8/31/18</p>
                                  <p>Sheila Balu 8/31/18</p>
                                  <p>Alvin Pan 8/31/18</p>
                                  <p>Yixiao Zhang 8/31/18</p>
                                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                                      <i class="fa fa-times"></i>
                                      Close Project
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- Modal 2 -->
      <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="close-modal" data-dismiss="modal">
                      <div class="lr">
                          <div class="rl"></div>
                      </div>
                  </div>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 mx-auto">
                              <div class="modal-body">
                                  <!-- Project Details Go Here -->
                                  <h2 class="text-uppercase">Lab 1: Microcontrollers</h2>
                                  <h3>Introduction </h3>
                                  <p align="left">In this lab, we learned the basics of programming Arduino using Arduino IDE, which uses C/C++ programming language. We learned how to use built-in functions to control pin modes and input and output both digital and analog data to various external components, including servo motors, LED and voltage divider circuits. </p>
                                  <h3>Part 1: Blinking an LED: </h3>
                                  <p align="left"> In the first part of the lab we used the example sketch supplied by Arduino to blink the built-in LED on the Arduino Uno. The built-in LED is attached to attached to pin D13 on the Arduino Uno. When D13 is set high the LED turns on. When D13 is set low, the LED turns off. This is done in an internal loop where a software delay sets how long the LED should be on and how long it should be off. To modify this to run an external LED, we attached a wire to pin D12 on the Arduino Uno and connected it to part of the breadboard. From here it is connected through a 1kOhm resistor into the anode of the LED (the longer leg).  The other leg of the LED is connected to a GND pin on the Arduino (as can be seen in the video below). The blinking script needs to be modified to trigger the pin connected to the LED. To do this we replaced every instance of LEDPIN with 12 (the pin number of D12).  </p>
                                  <pre><code>// the setup routine runs once when you press reset:
void setup() {
  // initialize serial communication at 9600 bits per second:
  pinMode(13, OUTPUT);
}

// the loop routine runs over and over again forever:
void loop() {
  digitalWrite(13, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(1000);              // wait for a second
  digitalWrite(13, LOW);    // turn the LED off by making the voltage LOW
  delay(1000);              // wait for a second
}</code></pre>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab1/LED.GIF" alt="" style="width:20vw;">
                                  <h3>  Part 2: Reading from a potentiometer and displaying on a serial console:</h3>
                                  <p align="left">Arduino’s examples include a script for reading input from an analog pin (A0 in this case) and displaying it to a serial console. We modified part of this so that the value “A0” is written to a variable named “pot”. Then during the analog reads we use the variable “pot” to select which analog pin to read from. An explanation of the original code is as follows: The command `Serial.begin(9600)` configures the serial pins on the device. It also tells the hardware running the serial port to transmit and read data at a baud rate of 9600 bits per second. Then in the loop function the code uses the `analogRead(pot)` command to read from the analog pin `pot` which is an alias for `A0`. It stores this value in `sensorValue`. The next command `Serial.println(sensorValue)` converts the value of `sensorValue` and converts it into a string. It then writes the string to the serial port followed by an end of line character. Finally the code pauses execution for 10 milliseconds.</p>
                                  <p align="left">Printing input from potentiometer  </p>
                                  <pre><code>int pot = A0;

// the setup routine runs once when you press reset:
void setup() {
  // initialize serial communication at 9600 bits per second:
  Serial.begin(9600);
}

// the loop routine runs over and over again forever:
void loop() {
  // read the input on analog pin 0:
  int sensorValue = analogRead(pot);
  // print out the value you read:
  Serial.println(sensorValue);
  delay(10);        // delay in between reads for stability
}</code></pre>
                                  <h3> Part 3: Potentiometer to control LED brightness </h3>
                                  <p align="left"> For part 3 of the lab, we slightly modified the lab from part 2 where we read an analog input. First, we normalize the input read from the potentiometer to the range 0 to 255. We then use an the analogWrite function to write this value to the LED. We use analogWrite from a digital pin, which is possible because we use PWM to simulate an analog signal from a digital output. As seen in the illustration, as we turn the potentiometer, the brightness of the LED changes. </p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab1/pot_led.GIF" alt="">
                                  <pre><code>int pot = A0;
int ledpin = 3;
// the setup routine runs once when you press reset:
void setup() {
  // initialize serial communication at 9600 bits per second:
  Serial.begin(9600);
  pinMode(ledpin, OUTPUT);
}

// the loop routine runs over and over again forever:
void loop() {
  // read the input on analog pin 0:
  int sensorValue = analogRead(pot);
  // print out the value you read:
  Serial.println(sensorValue);
  float volts = sensorValue/1023.0 * 255;
  analogWrite(ledpin, volts);
  delay(10);        // delay in between reads for stability
}</code></pre>
                                  <p align="left">Controlling a servo with potentiometer  </p>
                                  <pre><code>#include &lt;Servo.h&gt;

Servo myservo;  // create servo object to control a servo

int potpin = 0;  // analog pin used to connect the potentiometer
int val;    // variable to read the value from the analog pin

void setup() {
  myservo.attach(3);  // attaches the servo on pin 3 to the servo object
}

void loop() {
  val = analogRead(potpin);
      // reads the value of the potentiometer (value between 0 and 1023)
  //val = map(val, 0, 1023, 0, 180);
      // scale it to use it with the servo (value between 0 and 180)
  myservo.write(val);
      // sets the servo position according to the scaled value
  delay(15);
      // waits for the servo to get there
}</code></pre>
                                  <h3>Part 4: Potentiometer to control servo speed  </h3>
                                  <p align="left">The next step was to combine Arduino’s example code used to turn a servo and the example code used to read a potentiometer. First, we create a servo object, and declare an analog pin used to connect the potentiometer. We also declare a variable val used to read the value from the analog pin. We attach the servo pin (3) to the object. Next, in our loop, we read the value of the potentiometer using an analog pin. We then scale the value from a value between 0 and 1023 to a value between 0 and 180. We write this value to the servo, and finally call the delay for 15 ms.</p>
                                  <p align="left"> Code for moving in a straight line </p>
                                  <pre><code>#include &lt;Servo.h&gt;

Servo servo0;  // create servo object to control a servo
Servo servo1;  // create servo object to control a servo

// twelve servo objects can be created on most boards

//int pos = 90;    // variable to store the servo position

void setup() {
  servo0.attach(5);  // attaches the servo on pin 9 to the servo object
  servo1.attach(6);  // attaches the servo on pin 9 to the servo object
}

void loop() {
    servo0.write(180);       // tell servo to go to position in variable 'pos'
    servo1.write(0);         // waits 15ms for the servo to reach the position
    delay(500);
    //servo0.write(180);     // tell servo to go to position in variable 'pos'
    //servo1.write(0);       // waits 15ms for the servo to reach the position
    //delay(1500);
}</code></pre>
                                  <h3>Part 5: Making the Robot turn left and right   </h3>
                                  <p align="left"> After making the robot going straight, we programmed the robot to turn left and right. We adjusted the speed to be slightly below maximum so that the output voltage becomes less dependent on the state of the battery. We refactored the code and wrote three helper functions turnRight(), turnLeft() and goStraight(int delayTime). We run the left wheel forward and right wheel backward to turn right. We adjusted the turning time (how long the two wheels go in opposite directions) until it hits approximately 90 degrees. We tested by seeing the robot going straight and turning right alternatively so that it goes in a squire. Then we did the same thing with turning left with left wheel backward and right wheel forward. </p>
                                  <p align="left">Code for Going in a Square </p>
                                  <pre><code>#include &lt;Servo.h&gt;

Servo servo0;  // create servo object for the left servo
Servo servo1;  // create servo object for the right servo

// Helper function that runs servos
//   with leftSpeed, rightSpeed for delayTime msecs
void runServo(int leftSpeed, int rightSpeed, int delayTime)
{
  servo0.write(leftSpeed);
  servo1.write(rightSpeed);
  delay(delayTime);
}

// Turn 90 degrees to the right
void turnRight()
{
  runServo(160, 160, 556);
}
// Turn 90 degrees to the left
void turnLeft()
{
  runServo(20, 20, 556);
}

// Go straight for runTime msecs
void goStraight(int runTime)
{
    runServo(160, 20, runTime);
}

void setup() {
  servo0.attach(5);  // attaches the servo on pin 5 to the servo object
  servo1.attach(6);  // attaches the servo on pin 6 to the servo object
}

void loop() {
    goStraight(1000);
    turnRight();
}</code></pre>

                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab1/Square1.GIF" alt="" style="width:40vw;">
                                  <ul class="list-inline">
                                      <li>Date: August 31, 2018</li>
                                  </ul>
                                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                                      <i class="fa fa-times"></i>
                                      Close Project
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- Modal 3 -->
      <div class="portfolio-modal modal fade" id="portfolioModal3" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="close-modal" data-dismiss="modal">
                      <div class="lr">
                          <div class="rl"></div>
                      </div>
                  </div>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 mx-auto">
                              <div class="modal-body">
                                  <!-- Project Details Go Here -->
                                  <h2 class="text-uppercase">Milestone 1</h2>
                                  <h3>Goals </h3>
                                  <p align="left">To achieve Milestone 1, our team needed to improve our rover from Lab 1 to be able to follow a line, and to drive in a figure 8 pattern. </p>
                                  <h3>Hardware Changes </h3>
                                  <p align="left"> In order for the robot to follow lines we needed first to setup to robot to first detect the lines. In order to do so we utilized 4 lines sensors. These are installed on a breakout board by Sparkfun. They can be found <a href="https://www.sparkfun.com/products/9453">here </a>. The breakout board by Sparkfun is for the QRE1113 sensor. It’s a light emitting diode and a photosensitive transistor packaged into one device. The line sensor works by emitting IR light from the LED and reading the amount of light reflected back into the photosensitive transistor. The more light the photo-transistor receives the current it conducts. Sparkfun supplies the following schematic for their breakout:</p>
                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/lineFollowerSchematic.png" style="width:200px;" alt="Line Follower Schematic">
                                  <p align="left"> Since the photosensitive transistor is connected to the lower side of the signal port with a pull-up resistor on the top the sensor returns a lower voltage when more light is present (ie. when the light reflects off a lighter colour). We utilized 4 of these sensors by placing two near the front-center spaced slightly less apart than the width of the line. This allows the line sensor to determine whether is needs to turn left of right to center itself on the line. The other two sensors a placed in-line with the wheels. This allows the sensors to read when the turning point of the bot hits and intersection. The sensors are placed much wider apart than the lines so that they don’t see the line that’s currently being followed. Theses sensors have tape wrapped around them to make a curtain of sorts to block ambient light. Because the sensors read the amplitude of incoming light they are sensitive to background light. By wrapping them in curtains we can block the majority of the background light and reduce the amount of noise seen by the sensors. The only other change is a brace across the mounts for the motors. We’ve started to see the robot sag and bend while turning and the reasoning is that bracing the brackets will reduce the sagging and bending. </p>
                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/roverML1.JPG" style="width:30vw;" alt="Line Follower Schematic">
                                  <h3>Software Changes </h3>
                                  <p align="left"> We allocated 4 analog pins for reading data from the sensors and detecting lines on the grid. We tested the sensors and determined that the threshold for black and white is around 300. Inputs below the threshold are considered white, and inputs above the threshold are considered black.</p>
                                  <p align="left"> To make the robot follow a line, we use the front two sensors in the middle to trace a line, and have three functions goStraight(), adjustRight(), adjustLeft() to adjust directions based on sensor inputs. When both sensors read white, the robot goStraight() with two wheels running in the same speed. When left front sensor goes out of the line edge and reads black, adjustRight() is called, which stops the right wheel and only turns the left wheel, so that the robot can adjust towards right. And when the right front sensor reads black, we have adjustLeft() doing the opposite. The functions run in a loop so that the robot can make adjustments periodically. </p>
                                  <p align="left"> The code for Line Follower, which only utilizes the two front sensors, is written below: </p>

                                  <pre><code>void lineFollower()
    {
        readStatus();

        if(frontRightW && frontLeftW)
        {
            goStraight();

        } else if(!frontLeftW && frontRightW)
        {
            adjustRight();

        }   else if(frontLeftW && !frontRightW)
        {
            adjustLeft();
        }
    }

</code></pre>

                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/lineFollow.gif" alt="Line Follow Gif" style="width:40vw;">
                                  <p align="left"> To make the robot going in a figure 8, we added two turnRight() and turnLeft() functions with one wheel turning forward and one wheel turning back, so the robot can do a sharper turn of 90 degrees.  </p>
                                  <p align="left"> We refactored the line following code into a lineFollower() function, and added turnIntersection(char direction) that takes ‘l’ and ‘r’ as inputs and turns the robot accordingly. When the robot is following a line, it is considered to meet an intersection when both back side sensors read white. The robot then continues turning until the front middle sensors detect the crossing line. We add a 1100 msec delay after a turning starts before the front sensors start detecting the other line again, and make the the robot goStraight() for 300 msecs after it stops turning before it starts detecting the other intersection. Because the sensors stays on the line for a non-negligible time when switching modes, this technique is used to prevent the robot from accidently jumping over modes. </p>
                                  <p align="left"> We use a string "lrrrrlll" to signify the sequence of turning in figure 8, and use a counter that loops between 0~7 to keep track of the robot’s state of turning. We increment the counter every time turnIntersection(char direction) is called, and use the counter as index in the string to get the corresponding char passed into the function. </p>
                                  <p align="left"> To make a figure eight, in the main loop() we call lineFollower() and turnIntersection(char direction) once each, so the robot goes straight and turns appropriately into a figure 8. </p>
                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/figure8.gif" alt="Figure 8 Gif" style="width:40vw;">
                                  <p align="left"> The code for turnIntersection() function is written below: </p>
                                  <pre><code>void turnIntersection(char direction)
    {
        if(backRightW && backLeftW)
        {
            if(direction == 'l')
            {
                turnLeft();
                delay(1100);
                while(!(frontRightW && frontLeftW))
                {
                    readStatus();
                }
                goStraight();
                delay(300);
            } else {
                turnRight();
                delay(1100);
                while(!(frontRightW && frontLeftW))
                {
                    readStatus();
                }
                goStraight();
                delay(300);
            }
            count+=1;
            if(count == 8) count = 0;
        }
    }
</code></pre>



                                  <ul class="list-inline">
                                      <li>Date: Septmeber 14, 2018</li>
                                  </ul>
                                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                                      <i class="fa fa-times"></i>
                                      Close Project
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- Modal 4 -->
      <div class="portfolio-modal modal fade" id="portfolioModal4" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="close-modal" data-dismiss="modal">
                      <div class="lr">
                          <div class="rl"></div>
                      </div>
                  </div>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 mx-auto">
                              <div class="modal-body">
                                  <!-- Project Details Go Here -->
                                  <h2 class="text-uppercase">Lab 2: Analog Circuitry & FFT</h2>
                                  <h3>Introduction </h3>
                                  <p align="left">In this lab, we added sensors to our robot, and made analog circuits and a digital filter to interface with the Arduino. One was a microphone circuit capable of detecting a 660 Hz whistle blow signifying the beginning of our maze mapping. The other captured inputs from an IR sensor to detect nearby robots emitting IR at 6.08 kHz, distinguishing them from decoys emitting at 18 kHz. </p>
                                  <h3>IR Team: </h3>
                                  <p align="left"> First, we tested the Open Music Lab FFT library. We set our function generator to 660 Hz, 1Vpp, offset 0.5V. We ran the <i>fft_adc_serial</i> script that would output frequency data to the serial monitor. We copied the data from there, and graphed the values on Excel against the bin number. Next, we used the function generator to output a several other frequencies (1320 Hz, 1980 Hz, 2640 Hz) and graphed all of them against the same axis. Each data set peaked at an increased bin number as expected, and we verified this value by seeing the peak shift 4 to 5 bins with every 660 Hz increase.  </p>
                                  <p align="left">Our robot is required to distinguish between 6 kHz and 18 kHz. Therefore, we also tested these values with the same method as described above. We wanted to check that these values were detectable within the Arduino’s bin range. </p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/irFFT.png" alt="">
                                  <p align="left">We wired the circuit for the IR emitter, and used an oscilloscope to measure the frequency of its output. We took the measurement by putting two cursors around one cycle on the oscilloscope. It was operating at 6.25 kHz, a similar value to what we were expecting. We did the same for the decoy emitter and found it emitting at 18 kHz. We determined that the output voltage swing from the IR sensor was roughly 50mV peak-to-peak at 1 grid length away. To increase the signal strength we decided to add an amplifier and some filters. The IR sensor feeds into a high-pass filter. This is followed by an non-inverting op-amp amplifier with a gain of 67. This feeds into a low-pass filter. The resulting signal has a peak-to-peak voltage swing of roughly 1V so it’s likely that we’ll want to increase the gain on the amplifier and review the filter circuit input and output impedances. However this appears to be strong enough for the FFT to collect data. The following was used as the schematic for the active bandpass filter:  </p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/IRAmplifier.png" alt="">
                                  <p align="left">(Image from: https://www.electronics-tutorials.ws/filter/filter_7.html).</p>
                                  <table style="width:100%">
                                    <tr>
                                        <th>Component Name</th>
                                        <th>Value</th>
                                    </tr>
                                    <tr>
                                        <td>C1</td>
                                        <td>10nF (not measured)</td>
                                    </tr>
                                    <tr>
                                        <td>C2</td>
                                        <td>10nF (not measured)</td>
                                    </tr>
                                    <tr>
                                        <td>R1</td>
                                        <td>5.5008k&#8486;</td>
                                    </tr>
                                    <tr>
                                        <td>R2</td>
                                        <td>1.79424k&#8486;</td>
                                    </tr>
                                    <tr>
                                        <td>R3</td>
                                        <td>.98066k&#8486;</td>
                                    </tr>
                                    <tr>
                                        <td>R4</td>
                                        <td>67.99k&#8486;</td>
                                    </tr>
                                  </table>
                                  <p></p>
                                  <p align="left">The High Pass filter removes any DC offset so that the input voltage is zero except for the signal of interest. This is important since the DC offset is also amplified. The amplified DC offset can easily saturate the op-amp when the gain is too high. The low pass stage is for trying to remove harmonic terms and dampen out the higher frequency decoy. Since the frequencies are too close, the single stage RC low-pass filter does not filter out the higher terms significantly. As for the IR receiver, the circuit was flipped to change the diode to be on the high side and have the resistor on the low-side. This causes the signal to be low and rise when IR radiation is detected.</p>
                                  <p align="left">Next, we measured the output of our low pass filter through the A0 pin of the Arduino. We used FFT on this input and plotted the frequencies for instances when the IR hat was before the IR sensor, when the decoy was before the sensor, and when nothing was before the sensor.</p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/IRDetection.png" alt="">
                                  <p align="left">Detecting the IR hat required using the output bin from the FFT that corresponds to 6000 Hz. From our earlier FFT testing, we see that this frequency corresponds to bins around 40. We implemented a digital filter by only looking at the values in bins 39-42. Seeing that the IR hat has a large amplitude there, we only detect the IR hat if the bin value is above a certain threshold, which is currently 120. </p>
                                  <p align="left">As shown in the video below, when we put the IR hat near the sensor the Arduino prints “IR hat!----.” Then, when we put the decoy near the sensor, nothing is printed. And lastly we put the IR hat near the sensor again and see detection print statements.</p>
                                  <iframe width="740" height="416" src="https://www.youtube.com/embed/-ztLMWrDujA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                                  <p></p>
                                  <h3>Audio Team:</h3>
                                  <p align="left">We started by testing the function generator and oscilloscope. We generated a 660 Hz signal from the function generator, with a DC offset 1V and peak-to-peak voltage of 2V. That meant we were sending a sinusoidal signal varying between 0V and 2V. The captured signal waveform was displayed on the oscilloscope as shown below:</p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/osc4.jpg" alt="">
                                  <p align="left">Then, we fed the 660Hz signal from the function generator into pin A0 of arduino. We tried different frequencies and noticed the bin number corresponding to each frequency. The 660Hz signal was detected by observing a large value in bin number 20. In order to better determine the sampling frequency, we tried successively higher frequencies from the function generator, higher integer multiples of 660 Hz to be specific. We plotted the bin values vs bin number graphs for these different frequencies using Excel. The results are shown below: </p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/audioFFT.png" alt="">
                                  <p align="left">There are a few things to observe here. Notice the graph for 4620 Hz in green. The spike corresponding to this frequency appeared in one of the last bins. When we tried higher frequencies of 5280 Hz and 5940 Hz, aliasing occured, since we can see that the spikes corresponding to those frequencies appeared in lower bin numbers. </p>
                                  <p align="left">Thus, we conclude that the highest frequency detectable with the current sampling rate is approximately 4620 Hz, or more accurately, between 4620 Hz and 5280 Hz. This implies the sampling frequency is between 9240 Hz and 10560 Hz. Remember the Nyquist-Shannon Sampling theorem, which says the highest frequency detectable is half the sampling frequency. The IR team had a much higher sampling rate of ~ 40,000 Hz, but, as the datasheet indicates, precision is sacrificed by sampling at such a fast rate. Since the Audio team needs a higher precision to detect a much tiny microphone signal, we reduced our sampling frequency to 9600 Hz. We also used the analogRead() function, instead of running the ADC in free running mode. </p>
                                  <p align="left">Then, our next job was to explore how to get the microphone signal into the arduino, with a good signal-to-noise ratio. Firstly, the voiced speech of a typical adult male will have a fundamental frequency from 85 to 180 Hz, and that of a typical adult female from 165 to 255 Hz. SInce we wanted a clean 660 Hz signal, we built a simple RC high-pass filter with R = 37 Ohms and C = 6.8 nF. This gives a cutoff frequency of 634 Hz. We tested this circuit with different frequencies to see how much this attenuates lower frequency components compared with the desired 660 Hz. The following lists our results with the <b>input signal peak-to-peak value of 160 mV</b> and the attenuation at various frequencies lower than 660 Hz.</p>
                                  <p align="left">The attenuation coefficient for 100 Hz signal is 20*log (66/160)    = -7.7 dB BELOW:</p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/osc3.jpg" alt="">
                                  <p align="left">The attenuation coefficient for 150 Hz signal is 20*log (80/160)    = -6 dB BELOW:</p>

                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/osc1.jpg" alt="">
                                  <p align="left">The attenuation coefficient for 250 Hz signal is 20*log (111/160)  = -3 dB BELOW:</p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/osc2.jpg" alt="">
                                  <p align="left">The attenuation coefficient for 660 Hz signal is 20*log (158/160)   = -0.1 dB BELOW:</p>

                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/osc5.jpg" alt="">
                                  <p align="left">Next, we built an op-amp inverting amplifier with a gain=R2/R1 of 241. Instead of grounding the noninverting input, we biased it at 2.5 V so that the amplified microphone signal coming out will have AC oscillations around 2.5V. We also offset the AC signal coming from the microphone by 2.5 Volts, so that the differential amplifier <b>only</b> amplified the small signal microphone AC input. This also ensured we did not have clipping due to signal dipping below ground. As shown in the circuit below, the microphone signal passed through the capacitor which blocked the DC. The other side of the capacitor was connected to 2.5V through the 3.2K resistor. Then, we had V+ = 2.5V and V- = 2.5 + microphone small signal. </p>

                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/Circuit.jpg" alt="">
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/FFTCircuit.jpeg" alt="">
                                  <p align="left">We tested the raw microphone circuit by observing its output signal under 660Hz on the oscilloscope. The pk-pk is as small as about 104mV as shown below.</p>
                                  <p align="left">Raw, Unamplified Microphone Output with input from Audio generator app at 660 Hz (Below)</p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/osc7.jpg" alt="">
                                  <p align="left">Amplified Microphone Output with input from Audio generator app at 660 Hz (Below)</p>
                                  <img class="img-fluid d-block mx-auto" src="img/labs/lab2/Osc6.jpg" alt="">


                                  <ul class="list-inline">
                                      <li>Date: October 5 2018</li>
                                  </ul>
                                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                                      <i class="fa fa-times"></i>
                                      Close Project
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- Modal 5 -->
      <div class="portfolio-modal modal fade" id="portfolioModal5" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="close-modal" data-dismiss="modal">
                      <div class="lr">
                          <div class="rl"></div>
                      </div>
                  </div>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 mx-auto">
                              <div class="modal-body">
                                  <!-- Project Details Go Here -->
                                  <h2 class="text-uppercase">Milestone 2</h2>
                                  <h3>Goal </h3>
                                  <p align="left">To achieve Milestone 2, our team needed to add capability for our rover to perform right-hand wall following and avoid other rovers (through IR hat detection). We are asked to demonstrate these capabilities individually, and to integrate them into one rover. </p>
								  <h3>Modifications to Robot Structure</h3>
								  <p align="left">Our robot had a few issues when trying to complete milestone one, such as lack of space on the robot, lack of balance, and a design that was not structurally strong. As such, we decided to give our robot a makeover! We made the wheels smaller for more control, and made the robot such that several layers of plates could be stacked on top of each other to provide ample space for batteries, breadboards, and the arduino. We also incorporated five line sensors equally spaced along the bottom of the robot, instead of two at the front and two at the back. We soldered male pin headers onto the new sensors, and used male-female cables to neatly attach them to rest of the circuit. We also changed the location of our stabilizing wheel, moving it from the front to the back to assist with stability. </p>
                                  <img class="img-fluid d-block mx-auto" src= "img/milestones/milestone 2/img1.jpg" alt="">
								  <img class="img-fluid d-block mx-auto" src= "img/milestones/milestone 2/img2.jpg" alt="">
								  <h3>Schmitt Triggers</h3>
								  <p align="left">We also realized that we would not have enough analog inputs to support all of the sensors that we required on our robot. So, we used Schmitt Triggers, a logic input type that provides two threshold voltage levels for rising and falling edges. In other words, using one would give us a square wave signal instead of a noisy input signal, meaning we could use five digital inputs instead of five analog inputs. The following in the standard schematic of a Schmitt Trigger.</p>
								  <img class="img-fluid d-block mx-auto" src= "img/milestones/milestone 2/img3.png" alt="">
								  <p align="left">To modify this to work with our application, the inverting input of the op-amp had to be biased at the midpoint between where we wanted the output from switch from high to low and low to high. If R1=0 and R2=inf, then the schmitt trigger would operate as a normal comparator and would switch from high->low or low->high at the voltage of the inverting op-amp terminal. In our case since the voltage at which we wanted the op-amp to switch is at a low voltage we wanted the hysteresis to be small. Ie: in the following plot we wanted 2T to be small.</p>
								  <img class="img-fluid d-block mx-auto" src= "img/milestones/milestone 2/img4.png" alt="">
								  <p align="left">(Image from: https://en.wikipedia.org/wiki/Schmitt_trigger#/media/File:Hysteresis_sharp_curve.svg).</p>
								  <p align="left">To achieve this we R2 must be larger than R1. For the Schmitt Triggers on the robot we set R2 to be 1MOhm and R1 to be around 250Ohms. The inverting terminal of the op-amp is connected to the wiper of a potentiometer. This allows us to set the threshold of the trigger manually. For the line sensors. Output impedance of the sensor is too high so installed a unity voltage-gain current buffer in the middle (also made out of an op-amp). The following is the schematic for this:</p>
								  <img class="img-fluid d-block mx-auto" src= "img/milestones/milestone 2/img5.png" alt="">
								  <h3>PID Control</h3>
								  <p align="left">Now that we have five sensors to work with, we decided to implement PID control. PID control would allow our robot to greatly increase its speed and stability. PID stands for Proportional, Integral, Derivative: a formula used to control the speed that our robot should turn left or right. It uses continuous functions to compute the motor speeds, such that any jerkiness will be replaced by a smooth response.  Though we implemented all three P, I, and D, we thought that P control on its own did a great job of keeping our robot on track. This value is proportional to the robot’s position with respect to the line. Therefore, if the robot is centered on the line, the proportional value will be zero. If it is to the left of the line, the proportional term will be positive, and if it is to the right of the line, it will be negative. </p>
								  <pre><code>void PIDControl()
{
  error = IRmeasurements();
  motorSpeedL = -(Kp*error) + originalSpeed;
  motorSpeedR = +(Kp*error) + originalSpeed;
  runServo(motorSpeedL, motorSpeedR);
}</code></pre>
								  <p align="left">This is the model that we initially followed to determine position. While this worked at first, we found that it was more effective to consider the positions in between (ie where two side-by-side sensors triggered) and this allowed us to have a number between -4 and +4 as our position and therefore double our control.</p>
								  <img class="img-fluid d-block mx-auto" src= "img/milestones/milestone 2/img6.png" alt="">
								  <h3>Objective 1: Wall- Following Algorithm</h3>
								  <iframe width="853" height="480" src="https://www.youtube.com/embed/6Vh6D_x2n-Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
								  <p align="left">We added in a distance sensor which detects distance from the wall and outputs an analog signal. We first developed a simple sensor reading program and looked at output from the sensor to figured out that the threshold value is about 200 for detecting a wall present or absent. We integrated the sensor on our robot on the right side for right-hand wall following. Then, we refactored the figure-8 under PID control code and make the robot to always go straight whenever a wall is detected, and only start detecting intersection and turn right when the wall is absent. This allows our robot to follow a U-shaped wall on right hand.</p>
								  <pre><code>sensorValueRight = analogRead(sensorPinRight);
    sensorValueFront = analogRead(sensorPinFront);
    if(sensorValueRight<200){ // no wall to right
      digitalWrite(7, HIGH);
      turnRightSweep();
      digitalWrite(7, LOW);
    }
    else if (sensorValueRight>200 && sensorValueFront>200) // wall to right, wall to front
    {
      turnLeftSweep();
    }
    else
    {
      PIDControl();
    }</code></pre>
								  <h3>Objective 2: Avoid Other Robots</h3>
								  <p align="left">In lab 2, we developed robust detection of the IR hat using a mixture of hardware and digital filters. You can see a demonstration of our readIR() function in our lab 2 video, which shows an a print statement when the IR hat is held near the sensor. We integrated this readIR() function and the FFT library with our previous rover control code. In the loop function, we add a call to readIR(). If an IR Hat is detected, we have our rover turn 180 degrees and start moving in the opposite direction. This allows our robot to avoid other robots. See below for a demonstration of this capability.</p>
								  <pre><code> if(readIR()==1)
  {
    make180turn();
  }</code></pre>
								  <iframe width="853" height="480" src="https://www.youtube.com/embed/Z5eCU0QA2VY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
								  <h3>Objective 3: Integration</h3>
								  <p align="left">Lastly, we integrated all of our previous rover control modules into a single module. The rover tracks a line while following a right hand wall. Furthermore, it is constantly checking for an IR hat (other robot), and will turn 180 degrees if one is detected. The code below shows our final main loop.</p>
								  <pre><code>  if(readIR()==1)
  {
    make180turn();
  }
   if (!checkIntersection()) // we are not at an intersection
  {
    PIDControl();
  }
  else // we are at an intersection
  {
    //stopServos();
    sensorValueRight = analogRead(sensorPinRight);
    sensorValueFront = analogRead(sensorPinFront);
    if(sensorValueRight<200){ // no wall to right
      digitalWrite(7, HIGH);
      turnRightSweep();
      digitalWrite(7, LOW);
    }
    else if (sensorValueRight>200 && sensorValueFront>200) // wall to right, wall to front
    {
      turnLeftSweep();
    }
    else
    {
      PIDControl();
    }
  }
}
								  </code></pre>
								  <p align="left">In the video below, you will see our rover tracking a line using PID control. When it comes to an line intersection it checks for a wall to the right. If there is a wall, the rover continues straight. If there is no wall, the rover will turn right. The red LED indicates if the rover detects a wall. In the video our rover successfully goes straight through 3 intersections where there is a right-wall. Our rover also successfully turns right twice when there is no right-wall. Lastly, our rover detects another “rover” (IR hat) and turns 180 degrees to avoid the other rover.</p>
								  <iframe width="853" height="480" src="https://www.youtube.com/embed/AwN4xREmKHA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                                  <ul class="list-inline">
                                      <li>Date: October 12 2018</li>
                                  </ul>
                                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                                      <i class="fa fa-times"></i>
                                      Close Project
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- Modal 6 -->
      <div class="portfolio-modal modal fade" id="portfolioModal6" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="close-modal" data-dismiss="modal">
                      <div class="lr">
                          <div class="rl"></div>
                      </div>
                  </div>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 mx-auto">
                              <div class="modal-body">
                                  <!-- Project Details Go Here -->
                                  <h2 class="text-uppercase">Lab 3</h2>
                                  <p class="item-intro text-muted"></p>
                                  <h3>Introduction </h3>
                                  <p align="left">This lab had 2 goals: 1) to implement radio communication between our rover and a base station and 2) to integrate all developed components onto one functional rover. For radio communication, the rover would communicate maze information to the base station, which would then be displayed on a GUI. For integration, this includes components such as IR hat detection, wall detection, start signal detection, and radio communication.</p>
                                  <h3>Part 1: Radio</h3>
                                  <p align="left">The first thing the radio team did was install the GUI so we could make sure it worked on our laptops. We downloaded the files from the git repository, and then installed the required Python packages. As you can see below, we were able to successfully run the test script on our laptop.</p>
                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/GUItest.jpg" alt="">
                                  <p align="left">Next, we tested the radio functionality. We connected 2 Nordic nRF24L01+ transceivers to the Arduinos using the breakout board provided. We downloaded the RF24 Arduino library and used the GettingStarted sketch. After making the edits mentioned in the lab, we confirmed that the radios were successfully communicating with one another. We then tested the distance of the radio, and confirmed they worked 15 ft apart. They even worked up until 50 ft in the hallways of Phillips Hall. After testing, we copied the GettingStarted code into to files and stripped each one down until they only contained the portions necessary for either the rover or base station.</p>
                                  <p align="left">For rover transmission, we started by determining the size of the data packet needed to be sent. Based on the size of the data needed for saving a space in the maze and the minimum size needed for specifying a location in a 9x9 grid we established that we would need 2 bytes of data. Using this, we modified the setup code to only transmit and receive 2 bytes of data. According to the getting started script reducing the size of the payload increases the reliability of the radio. We tested this setup first by hand-modifying the messages for the GUI tester into radio messages and sent them at 1 second increments. Each transmission was packed into a blocking while loop to guarantee that the transmission succeeded.</p>
                                  <p align="left">The following were the comments to specify the bits used during transmission. The items are ordered from MSB to LSB:</p>
                                  <pre><code>
  //byte 1
  //8bits of position

  //byte 2
  //1bit north wall
  //1bit south wall
  //1bit east wall
  //1bit west wall
  //1bit robot
  //2bits treasure shape //cic,tri,sq,none
  //1bit treasure color //red,blue
                                  </code></pre>
                                  <p align="left">For the base station, we know the packet structure being sent from the rover. Therefore, we just needed to interpret the coordinates, and wall information from the data packet. This was done with some simple calculations and bit masking. </p>
                                  <pre><code>
  uint8_t coord = payload[0];
  uint8_t info = payload[1];
  String x = String(coord%9);
  String y = String(coord/9);
  Serial.print(y+",");
  Serial.print(x);

  int north = (info&0x80);
  if(north) Serial.print(",north=true");
  int south = (info&0x40);
  if(south) Serial.print(",south=true");
  int east = (info&0x20);
  if(east) Serial.print(",east=true");
  int west = (info&0x10);
  if(west) Serial.print(",west=true");
  Serial.print("\n");
                                  </code></pre>
                                  <p align="left">To demonstrate robust rover to base station communication, we have the GUI moving the rover indicator in the reverse direction from the example.</p>
                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/GUItest2.gif" alt="" style="width:50vw;">

                                  <h3>Data Structure</h3>

                                  <p align="left">The maze’s data structure is a 2D array that specifies walls, and treasures. It conforms to the format of the transmission and is intended to make assigning bits easy to read and code with. We utilize a C element called a union to access a byte as two different data types. One of these data types is a struct with bitwise access. Although this method of accessing data is platform dependent we’ll be sticking with the Arduino Uno so this isn’t a major concern.</p>
                                  <pre><code>
typedef union {
 unsigned c: 8;
 struct {
   unsigned t_color: 1;
   unsigned t_shape: 2;
   unsigned robot: 1;
   unsigned west: 1;
   unsigned east: 1;
   unsigned south: 1;
   unsigned north: 1;
 };
} square_data_t;

square_data_t maze_data[9][9];

                                  </code></pre>
                                  <p align="left">Each item may be accessed as if reading from a structure or a union and data from the maze may be accessed via the 2D array. For example, to set position (3,4) to have a north wall is as easy as: </p>
                                  <pre><code>
maze_data[3][4].north = 1;
                                  </code></pre>
                                  <p align="left">The intention is to add another array which will contain a bit field that specifies which spaces have been visited but it was not necessary to add yet for this lab.</p>

                                  <h3>Part 2: Integration</h3>
                                  <p align="left">Integration was quite a challenge because there were many components. We started by including the code for 660Hz audio detection, which acted as a cue to start the robot. We placed the code, a while loop, at the end of the setup() function body since it only needed to be run once. The program stayed in the while loop until we detected a peak in the 20th bin, corresponding to a value > 80. </p>
                                  <p align="left">We also incorporated a second wall sensor. Now, we use one sensor to detect walls to the right of the robot, and one sensor to detect walls to the front of the robot. The algorithm checks the status of both sensors at each intersection. If there is no wall to the right, the robot will turn right. If there is a wall to the right and a wall to the front, it turns left. If there is a wall to the right and no wall to the front, it goes straight. We also turn on the LED when turning to show what the robot is thinking.</p>
                                  <pre><code>if(rightSensor() == 0)
    {
      digitalWrite(7, HIGH);
      turnRightSweep();
      digitalWrite(7, LOW);

    } else if(frontSensor() == 1)
    {
      digitalWrite(7, HIGH);
      turnLeftSweep();
      digitalWrite(7, LOW);
    }

    else
    {
      PIDControl();
    }

                                  </code></pre>
                                  <p align="left">We also designed an algorithm to track the location of the rover. The algorithm works on the following principles: 1)the update to location always takes place when an intersection is encountered and 2) the update to location depends on the direction of travel at the intersection before turning. We implemented a pseudo finite state machine code containing 4 states. Each state represented the direction of travel of the robot, stored in the variable dir. The transitions between states were triggered by the detection of intersection. The position of the robot was represented by (x,y) coordinates. The position of the robot was initialized to have value (2,0) and the direction the robot faced was initialized to dir=2 (South). </p>
                                  <p align="left">Finally, we combined our finite state machine logic and our knowledge of the maze to update the maze data about walls on all four sides. In future, we plan to include a left wall sensor which will make our robot capable of autonomously detecting and updating information about walls without specific knowledge of the maze. The direction conventions and the working of our finite state logic are shown below:</p>

                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/lab3diagram.jpg" alt="">
                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/lab3diagram2.jpg" alt="">
                                  <p align="left">In future, we plan to integrate a left wall sensor which would simplify our state transitions as well as make it possible for our robot to navigate a more general maze structure. </p>
                                  <h3>Putting it all together</h3>
                                  <p align="left">After verifying that the robot can produce correct coordinate and maze data, we integrate the navigation algorithm with all the sensors. In the video below, you will see our rover successfully accomplish the goals set for lab 3. The rover starts on a 660Hz tone, and begins exploring the maze while transmitting its coordinates to the base station. The rover uses right-wall following to navigate the maze, and we see the GUI update properly as the rover travels. At the other end of the maze, it encounters an IR hat and turns 180 degrees to avoid other rovers.</p>
                                  <iframe width="560" height="315" src="https://www.youtube.com/embed/yjCHxKzrZv4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                                      <i class="fa fa-times"></i>
                                      Close Project
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>


      <!-- Modal 7 -->
      <div class="portfolio-modal modal fade" id="portfolioModal7" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="close-modal" data-dismiss="modal">
                      <div class="lr">
                          <div class="rl"></div>
                      </div>
                  </div>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 mx-auto">
                              <div class="modal-body">
                                  <!-- Project Details Go Here -->
                                  <h2 class="text-uppercase">Project Name</h2>
                                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/06-full.jpg" alt="">
                                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                                  <ul class="list-inline">
                                      <li>Date: January 2017</li>
                                      <li>Client: Window</li>
                                      <li>Category: Photography</li>
                                  </ul>

                                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                                      <i class="fa fa-times"></i>
                                      Close Project
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- Modal 8 -->
      <div class="portfolio-modal modal fade" id="portfolioModal8" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="close-modal" data-dismiss="modal">
                      <div class="lr">
                          <div class="rl"></div>
                      </div>
                  </div>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 mx-auto">
                              <div class="modal-body">
                                  <!-- Project Details Go Here -->
                                  <h2 class="text-uppercase">Coming Soon</h2>
                                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/03-full.jpg" alt="">
                                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                                  <ul class="list-inline">
                                      <li>Date: January 2017</li>
                                      <li>Client: Finish</li>
                                      <li>Category: Identity</li>
                                  </ul>
                                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                                      <i class="fa fa-times"></i>
                                      Close Project
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- Modal 9 -->
      <div class="portfolio-modal modal fade" id="portfolioModal9" tabindex="-1" role="dialog" aria-hidden="true">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="close-modal" data-dismiss="modal">
                      <div class="lr">
                          <div class="rl"></div>
                      </div>
                  </div>
                  <div class="container">
                      <div class="row">
                          <div class="col-lg-8 mx-auto">
                              <div class="modal-body">
                                  <!-- Project Details Go Here -->
                                  <h2 class="text-uppercase">Coming Soon</h2>
                                  <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                  <img class="img-fluid d-block mx-auto" src="img/portfolio/03-full.jpg" alt="">
                                  <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                                  <ul class="list-inline">
                                      <li>Date: January 2017</li>
                                      <li>Client: Finish</li>
                                      <li>Category: Identity</li>
                                  </ul>
                                  <button class="btn btn-primary" data-dismiss="modal" type="button">
                                      <i class="fa fa-times"></i>
                                      Close Project
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>


      <!-- Bootstrap core JavaScript -->
      <script src="vendor/jquery/jquery.min.js"></script>
      <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

      <!-- Plugin JavaScript -->
      <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

      <!-- Contact form JavaScript -->
      <script src="js/jqBootstrapValidation.js"></script>
      <script src="js/contact_me.js"></script>

      <!-- Custom scripts for this template -->
      <script src="js/agency.min.js"></script>

  </body>

</html>
